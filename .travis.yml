sudo: required
dist: trusty
language: cpp

before_install:
  - sudo apt-get update -qq
  # Install ZeroMQ
  - sudo apt-get install -y libzmq3-dev libzmq3
  # Install Boost
  - sudo apt-get install -y libboost-all-dev
  # Install yaml-cpp
  - sudo apt-get install -y libyaml-cpp0.5 libyaml-cpp-dev
  # Install libcURL
  - sudo apt-get install -y libcurl4-gnutls-dev
  # Install isolate
  - git clone https://github.com/ioi/isolate.git
  - cd isolate
  - "cat Makefile | sed 's/all: isolate isolate.1 isolate.1.html/all: isolate/' > Makefile_new"
  - rm -f Makefile
  - mv Makefile_new Makefile
  - make
  - sudo make install
  - cd ..
  - rm -rf isolate

install:
  - git submodule update --init

script:
  - mkdir build
  - cd build
  - cmake ..
  - make
  - tests/run_tests
