<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ReCodEx - Worker: fallback_file_manager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ReCodEx - Worker
   </div>
   <div id="projectbrief">ReCodEx is complex programmer testing solution, primary targeted to technical universities. It&#39;s highly customizable and based on modern technologies.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfallback__file__manager.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfallback__file__manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">fallback_file_manager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="fallback__file__manager_8h_source.html">fallback_file_manager.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for fallback_file_manager:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classfallback__file__manager.png" usemap="#fallback_5Ffile_5Fmanager_map" alt=""/>
  <map id="fallback_5Ffile_5Fmanager_map" name="fallback_file_manager_map">
<area href="classfile__manager__base.html" alt="file_manager_base" shape="rect" coords="0,0,136,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:add17006367ee5c218e53db8be8d88633"><td class="memItemLeft" align="right" valign="top">typedef std::shared_ptr&lt; <a class="el" href="classfile__manager__base.html">file_manager_base</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfallback__file__manager.html#add17006367ee5c218e53db8be8d88633">file_manager_ptr</a></td></tr>
<tr class="separator:add17006367ee5c218e53db8be8d88633"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2ba2da9c188eed71e57395e5f7bbfd84"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfallback__file__manager.html#a2ba2da9c188eed71e57395e5f7bbfd84">fallback_file_manager</a> (<a class="el" href="classfallback__file__manager.html#add17006367ee5c218e53db8be8d88633">file_manager_ptr</a> primary, <a class="el" href="classfallback__file__manager.html#add17006367ee5c218e53db8be8d88633">file_manager_ptr</a> secondary)</td></tr>
<tr class="separator:a2ba2da9c188eed71e57395e5f7bbfd84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b6ff8b95f0a1b399b1fdd22eb853ae"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfallback__file__manager.html#a62b6ff8b95f0a1b399b1fdd22eb853ae">~fallback_file_manager</a> ()</td></tr>
<tr class="separator:a62b6ff8b95f0a1b399b1fdd22eb853ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf62a41f77e1559004661e98647b83a8"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfallback__file__manager.html#abf62a41f77e1559004661e98647b83a8">get_file</a> (const std::string &amp;src_name, const std::string &amp;dst_name)</td></tr>
<tr class="separator:abf62a41f77e1559004661e98647b83a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a737659f4087fca76b230b42867c4d018"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfallback__file__manager.html#a737659f4087fca76b230b42867c4d018">put_file</a> (const std::string &amp;src_name, const std::string &amp;dst_url)</td></tr>
<tr class="separator:a737659f4087fca76b230b42867c4d018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfile__manager__base"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfile__manager__base')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfile__manager__base.html">file_manager_base</a></td></tr>
<tr class="memitem:a3f308ee9ec633297ec0308ef4280f0ee inherit pub_methods_classfile__manager__base"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfile__manager__base.html#a3f308ee9ec633297ec0308ef4280f0ee">~file_manager_base</a> ()</td></tr>
<tr class="separator:a3f308ee9ec633297ec0308ef4280f0ee inherit pub_methods_classfile__manager__base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Combines two file managers in a hierarchical manner. When looking for a file, it tries the primary file manager first. If nothing is found, it tries the secondary one. If that helps, it stores the file using the primary file manager. Files are saved using the secondary manager. In easy language, first one is cache and second one is http manager for example. Failed operations throws <em><a class="el" href="classfm__exception.html">fm_exception</a></em> exception. </p><dl class="section note"><dt>Note</dt><dd>Both managers need to use the same file names - some prefixing might need to be done (see <a class="el" href="classprefixed__file__manager.html">prefixed_file_manager</a>). </dd></dl>

<p>Definition at line <a class="el" href="fallback__file__manager_8h_source.html#l00020">20</a> of file <a class="el" href="fallback__file__manager_8h_source.html">fallback_file_manager.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="add17006367ee5c218e53db8be8d88633"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::shared_ptr&lt;<a class="el" href="classfile__manager__base.html">file_manager_base</a>&gt; <a class="el" href="classfallback__file__manager.html#add17006367ee5c218e53db8be8d88633">fallback_file_manager::file_manager_ptr</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pointer to every file manager type. </p>

<p>Definition at line <a class="el" href="fallback__file__manager_8h_source.html#l00024">24</a> of file <a class="el" href="fallback__file__manager_8h_source.html">fallback_file_manager.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2ba2da9c188eed71e57395e5f7bbfd84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fallback_file_manager::fallback_file_manager </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfallback__file__manager.html#add17006367ee5c218e53db8be8d88633">file_manager_ptr</a>&#160;</td>
          <td class="paramname"><em>primary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfallback__file__manager.html#add17006367ee5c218e53db8be8d88633">file_manager_ptr</a>&#160;</td>
          <td class="paramname"><em>secondary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor for creating this class with two instances of file manager (our only case is <em><a class="el" href="classcache__manager.html">cache_manager</a></em> and <em><a class="el" href="classhttp__manager.html">http_manager</a></em>). This is useful especially for testing with mocked classes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">primary</td><td>Primary manager (cache) instance poiter. </td></tr>
    <tr><td class="paramname">secondary</td><td>Secondary manager (HTTP) instance pointer. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="fallback__file__manager_8cpp_source.html#l00004">4</a> of file <a class="el" href="fallback__file__manager_8cpp_source.html">fallback_file_manager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a62b6ff8b95f0a1b399b1fdd22eb853ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual fallback_file_manager::~fallback_file_manager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destructor. </p>

<p>Definition at line <a class="el" href="fallback__file__manager_8h_source.html#l00038">38</a> of file <a class="el" href="fallback__file__manager_8h_source.html">fallback_file_manager.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="abf62a41f77e1559004661e98647b83a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fallback_file_manager::get_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dst_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get file. If requested file is in cache, copy will be saved as <em>dst_name</em> immediately, otherwise it'll be downloaded to cache first and copied to requested destination later. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src_name</td><td>Name of requested file. </td></tr>
    <tr><td class="paramname">dst_name</td><td>Path (with filename) where to save the file (actual path you want, caching is transparent from this point of view). </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classfile__manager__base.html#a6c87c8ceca745f7dd6180d701391f34a">file_manager_base</a>.</p>

<p>Definition at line <a class="el" href="fallback__file__manager_8cpp_source.html#l00010">10</a> of file <a class="el" href="fallback__file__manager_8cpp_source.html">fallback_file_manager.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a737659f4087fca76b230b42867c4d018"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fallback_file_manager::put_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>dst_url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Save file using only secondary manager (i.e. upload file to remote server). It won't be saved to cache. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src_name</td><td>Name of the file (with path) to upload. </td></tr>
    <tr><td class="paramname">dst_url</td><td>Destinaton (url where to upload the file). </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classfile__manager__base.html#a9d16ccc1adfa7188fe778f5ecfba4a00">file_manager_base</a>.</p>

<p>Definition at line <a class="el" href="fallback__file__manager_8cpp_source.html#l00022">22</a> of file <a class="el" href="fallback__file__manager_8cpp_source.html">fallback_file_manager.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/fileman/<a class="el" href="fallback__file__manager_8h_source.html">fallback_file_manager.h</a></li>
<li>src/fileman/<a class="el" href="fallback__file__manager_8cpp_source.html">fallback_file_manager.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classfallback__file__manager.html">fallback_file_manager</a></li>
    <li class="footer">Generated on Wed Jul 27 2016 11:15:29 for ReCodEx - Worker by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
